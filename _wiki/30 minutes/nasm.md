## INT指令

13h：入口选择——ah的值
  00h：磁盘系统复位
		dl=驱动器号（00h~7Fh表示软盘，80h~FFh表示硬盘）
		出口：CF=0表示操作成功，此时ah=00h；相反

	02h：读一个扇区数据到缓冲区
		al=要读取扇区数量
		ch=柱面（磁道）号
		cl=起始扇区号
		dh=磁头号
		dl=驱动器号（00h~7Fh表示软盘，80h~FFh表示硬盘）
		es:bx=缓存区的位置
		出口：







CF（标志寄存器-0）：
PF（标志寄存器-2）：
AF（标志寄存器-4）：
ZF（标志寄存器-6）：
SF（标志寄存器-7）：
TF（标志寄存器-8）：
IF（标志寄存器-9）：
DF（标志寄存器-10）：
OF（标志寄存器-11）：



## 数据传输指令

基本传输指令：
  MOV AX,BX：
		将后者数据传输到前者中
	PUSH/POP：
		压栈/出栈指令


地址数据传输指令：
	LEA AX,BIAOSHI：将BIAOSHI指向的偏移地址装入16或者32位的寄存器中

	LDS/LES/LFS/LGS/LSS：用法同LEA，但同时将段地址装入DS/ES/FS/GS/SS中

常用串传输命令：
	cld/std：控制方向标志位D取0/1，从而控制数据增减

	lods/stos/movs/ins/outs m8/m16/m32：是以下五种功能的集总，即可以取选定数据的大小
	lodsb/lodsw/lodsd：
		块传输命令，从ds:si指向的内存空间取一个字节/一个字/两个字的数据装入al，方向标志位D=0，si自动增加所取数据大小，D=1，si自动减少所取数据大小
	stosb/stosw/stosd：
		块传输命令，从al取一个字节/一个字/两个字数据送到es:di指向的内存空间，方向标志位D=0，di自动增加所取数据大小，D=1，di自动减少所取数据大小
	movsb/movsw/movsd：
		块传输命令，从ds:si指向的内存空间取一个字节/一个字/两个字的数据送入es:di指向的内存空间，方向标志位D=0，si、di自动增加所取数据大小，D=1，si、di自动减少索取数据大小，这是8086上唯一支持从内存到内存的数据传输指令
	insb/insw/insd：
		块传输命令，从I/O设备端口取一个字节/一个字/两个字数据送到es:di指向的内存，方向标志位D=0，si自动增加所取数据大小，D=1，si自动减少所取数据大小
	outsb/outsw/outsd：
		块传输命令，从ds:si指向的内存空间取一个字节/一个字/两个字的数据送到I/O设备端口，方向标志位D=0，si自动增加所取数据大小，D=1，si自动减少所取数据大小

其它数据传输指令：
	XCHG AX,BX：
		交换AX和BX中的数据，即此命令起交换作用

	LAHF/SAHF：
		桥接指令，前者将标志寄存器中的最右边8位送到AH寄存器，后者则恰好相反

	XALT：
		将AL、BX的内容相加得到的值作为存储器地址，然后从这个存储器地址指向的内存空间取值放到AL中，这时8086中唯一一条将8位数字加到16位数字上的指令

	IN AX,P0/OUT P0,AX:
		I/O设备端口数据传输指令，将P0端口的值送到AX/将AX的值送到P0端口

	MOVSX CX,BL/MOVZX CX,BL(>=80386)：
		从8位传输数据到16位或16位传输到32位的时候，前者保留符号，即10000001表示-1，当传输到CX中的时候，变为1000 0000 0000 0001；后者用于把前面的位数全补0，即变为0000 0000 1000 0001

	BSWAP(>80486) EAX：
		将EAX中的字节反序，即32128947H变为47891232H

	CMOV(>=Pentium pro)：
		测试标志位后转移


## nasm与masm

jmp a:b   将段地址修改为a（立即寻址方式），并且将偏移地址改为b（立即寻址方式）
jmp x   将偏移地址修改为x寄存器对应的地址（寄存器寻址方式）
jmp short 标号：表达出相对位移，用一个字节表示，所以相对位移的范围为（-128~127）
jmp near ptr 标号：也是表示相对位移，但是用两个字节表示，所以相对位移的范围为（-32768~32767）
jmp far ptr 标号：表示远转移——段间转移


## 概述

8086寄存器
  AX（通用寄存器）：累加寄存器，常用于运算与转存数据
	BX（通用寄存器）：转存数据，（计数存储器——内存偏移位置寻址）CX（通用寄存器）：转存数据，（存储默认循环次数）
	DX（通用寄存器）：转存数据
	CS（段寄存器）：实时指令段寄存器
	DS（段寄存器）：
		默认段寄存器（For BX、SI、DI）（不能通过内存及常量寻址方式更改DS中的值，只能通过寄存器寻址方式）
	ES（段寄存器）
	SS（段寄存器）：默认栈顶段寄存器
	GS（段寄存器）：视频段寄存器
	DI：
	SI：
	BP：用于存储栈偏移位，从而用来寻址栈中元素
	IP：存储实时指令偏移地址
	SP：存储实时栈顶偏移地址
	CS:IP：表示实时指令全地址
	SS:SP：内存中实时栈顶地址




内存寻址方式的时候需要在内存地址（里面只写入偏移地址——段地址为默认，即DS）上加上方括号

数据高2位在高地址上，低2位在低地址上
指令相同不代表翻译成机器代码就一定相同，还要根据操作数决定
当修改SS寄存器的内容时，Debug中的t命令也会执行下一条命令（中断机制）
——造成栈空间的数据改变



loop：循环命令

start  程序入口
and 与操作
or 或操作
dup 配合声明符号定义循环数据（数组）
int 中断——非常有用（00h——除数为0   10h——显示信息）
%include "~.inc"  类似于C，包含文件


在8086处理器中，汇编语言的源代码中不加后缀的数据默认为
汇编源程序与debug汇编程序使用时是不同的，




伪命令（由编译器标识的命令）：
assume cs:codesg  定义codesg这个段（向操作系统申请这个段空间），并且与cs寄存器相关联（只是标识而已），（这条命令是由编译器执行的，所以可能由一系列的复杂源组成，就相当于封装了一些数据）
段名 segment  
..
段名 end     段的框架，一个汇编程序可以有多个段




修饰符：
没有修饰符时，根据修改寄存器的大小控制数据长度
word ptr  字修饰符
dword ptr  双字修饰符
byte ptr 字符修饰符





nasm语法：
nasm源文件中，字符均被看为地址（用[]包含的不算）
结构数组宏定义：
%macro  定义的宏名  参数数
~~（假定n个参数，则用%i表示第i个参数，编译时，就将参数带入得到一个结构数组对象）
%endmacro

& 与运算
| 或运算
equ 代替语句（同=意义，但并未开辟空间）












采用二进制补码的形式表示带符号数，最高位表示符号，其中0代表正，1代表负

求补就是求相反（表示）数

什么都不加时，默认是10进制数据，因此最好加后缀

org：不对应指令码，即严格意义上不是汇编，它的作用是在链接时显现的，用来将接下来的一句话放到指定的绝对地址

[section ]：用来表示代码段功能，相当于注释，不会被编译

$：当前地址位
$$：当前段的首地址

rep:命令同loop

org：链接时执行（不进行编译），当程序执行时把程序加载到对应的内存地址

db：在当前位置写入数据，按字节写入，小整数只存储1个字节，当后面接字符串时，每个字符占一个字节
dw：当前位置写入一个字（x86实模式是双字节）
dd：当前位置写入一个双字（x86实模式是4字节）
times：重复操作，后面接次数


xor：异或，11得0，00得0


cmp 减法操作，但不保存结果，仅用来影响标志位，等于0时执行下一语句
test ax,bx：将ax与bx进行与运算，但不保存结果，只影响标志位






## 段描述

NASM
  SECTION：
MASM
	段名 SEGMENT               //描述段的基本单位
		…
	段名 ENDS

完整段程序结构：
简化段程序结构：
	.MODEL 模式名
	.DATA
		…
	.STACK
	.CODE
	.STARTUP
	END



section就相当于分段
ALIGN：指定接下来的段以多少大小进行对齐，默认是以4个字节对齐


SECTION 是对段落的一种分块，相当于masm中的assume，但是SECTION除了自定义外，还有编译器默认集成的.data   .test等数据

## 算数指令

基本算术指令
  ADD AX,BX ：加法，AX+BX，同时将值存入AX中
	ADC：
	SUB AX,BX：减法，AX-BX，同时将值存入AX中
	SBB：
	MUL：
	IMUL：
	DIV CX：
		除法，只接除数，被除数在ax中（当除数是8位时）或在ax与dx中（除数为16位时，此时ax存低16位，bx存高16位）；如果除数是8位，则al存储除法操作的商，ah存储除法操作的余数，如果除数是16位，则ax存储除法操作的商，dx存储除法操作的余数
	IDIV：
	INC/DEC AX：
		寄存器值自加/自减1
	CMP

基本逻辑指令


## 跳转指令

无条件跳转
  jmp

循环寄存器（cx、ecx）条件跳转
标志寄存器条件跳转

	jc：进位标志（CF=1 进位）时跳转到对应语句
	jnc：进位标志（CF=0 不进位）时跳转到对应语句

	jz：零标志（ZF=1 为0）时跳转到对应语句
	jnz：零标志（ZF=0 不为0）时跳转到对应语句

	jo：溢出标志位（OF=1 溢出）时跳转到对应语句
	jno：溢出标志位（OF=0 没溢出）时跳转到对应语句

	js：为负跳转
	jns：非负跳转


大小判断条件转移
	ja：无符号大于跳转
	jna：
	jae：无符号大于等于跳转
	jnae：

	jb：无符号小于跳转
	jnb：
	jbe：无符号小于等于跳转
	jnbe：

	je：无符号等于跳转
	jne：无符号不等于跳转

	jg：有符号大于跳转
	jng
	jge：有符号大于等于则跳转
	jnge


	jl：有符号小于则跳转
	jnl：
	jle：有符号小于等于则跳转
	jnle：

	jp：奇偶位置位跳转
	jnp：奇偶位清除跳转
	jpe：奇偶位相等跳转
	jpo：奇偶位不等跳转








转移指令——可修改IP或同时修改CS和IP的指令
jmp ~：段内转移，即修改ip数据为ax，（常量及寄存器寻址方式）
jmp word ptr  ~：功能同上，（内存及寄存器寻址方式）

jmp ~:~：段间转移，给出了完整的转移位置，（常量寻址方式）
jmp dword ptr ~：从内存~处选取四个字节，低两个字节给ip，高两个字节给cs，（内存寻址方式）

jmp short ~：短转移——机器代码用相对位置标识，且必为段内转移，作用为转到标识符（~）执行，相对位置修改范围为-128~127，（jmp near ptr ~功能相同，但是范围为-32768~32767），（常量及标识符内存寻址方式）
jmp far ptr ~：远转移（段间转移，和~相同的cs:ip）（机器代码直接用地址，不用相对位置），（标识符内存寻址方式）

jcxz ~：条件转移（所有条件转移都是短转移，范围-128~127），若cx为0，则转移到~（标识符）处执行，cx不等于0，则继续向下执行，（标识符内存寻址方式）

loop ~：循环转移（所有循环转移都是短转移，范围-128~127），cx等于0，则继续向下执行，不等于0则跳到~（标识符）处执行，（标识符内存寻址方式）

offset ~：取得标识符（~）对当前的相对位置（因此只是个取得返回值的函数，不具备跳转功能），（标识符内存寻址方式）

ret：同指令pop ip
retf：同指令pop ip    pop cs

call ~：同指令 push ip    jmp near ptr ~
call far ptr ~：同指令push cs   push ip    jmp far ptr ~

org ~：将程序直接加载到地址处执行
